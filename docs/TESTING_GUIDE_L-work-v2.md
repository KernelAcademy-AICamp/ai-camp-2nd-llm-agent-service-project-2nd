# L-work-v2 기능 테스트 가이드

> **작성일**: 2025-12-05
> **브랜치**: `L-work-v2`
> **담당**: Anti Gravity 테스트용

---

## 1. 환경 설정

### 1.1 Frontend 서버 실행

```bash
cd frontend
npx kill-port 3000  # 기존 프로세스 종료
npm run dev
```

**확인**: http://localhost:3000 접속 가능

### 1.2 Backend 서버 실행 (선택)

```bash
cd backend
uvicorn app.main:app --reload --port 8000
```

**확인**: http://localhost:8000/docs 접속 가능

> **참고**: Backend 없이도 Frontend는 동작하지만, API 호출 시 에러 표시됨

---

## 2. 테스트 시나리오

### 2.1 사건 상세 페이지 - 새 탭 확인

**URL**: http://localhost:3000/cases/1

**체크리스트**:
- [ ] 상단 탭 바에 **관계도** 탭이 보이는가? (Users 아이콘)
- [ ] 상단 탭 바에 **재산분할** 탭이 보이는가? (Scale 아이콘)
- [ ] 탭 순서: 증거 → 관계도 → 재산분할 → 상대방 주장 → 타임라인 → Draft

**스크린샷 위치**: 탭 바 영역

---

### 2.2 관계도 탭

**URL**: http://localhost:3000/cases/1 → **관계도** 탭 클릭

**체크리스트**:
- [ ] 관계도 탭 클릭 시 내용이 표시되는가?
- [ ] "인물 관계도" 제목이 보이는가?
- [ ] "전체 화면으로 보기" 버튼이 있는가?
- [ ] 버튼 클릭 시 `/cases/1/relationship` 페이지로 이동하는가?

**예상 화면**:
```
┌─────────────────────────────────────────┐
│ 👥 인물 관계도          [전체 화면으로 보기] │
│ 증거에서 추출된 인물들의 관계를 시각화합니다.  │
├─────────────────────────────────────────┤
│                                         │
│      👥 관계도를 전체 화면에서 확인하세요.    │
│                                         │
│      /cases/1/relationship 페이지로 이동 → │
│                                         │
└─────────────────────────────────────────┘
```

---

### 2.3 인물 관계도 전체 화면

**URL**: http://localhost:3000/cases/1/relationship

**체크리스트**:
- [ ] 페이지가 정상적으로 로드되는가?
- [ ] 헤더에 "인물 관계도" 제목이 표시되는가?
- [ ] ← 뒤로가기 버튼이 `/cases/1`로 이동하는가?
- [ ] 새로고침 버튼이 동작하는가?

**API 연동 시 (Backend 실행 필요)**:
- [ ] 로딩 스피너가 표시되는가?
- [ ] API 에러 시 에러 메시지가 표시되는가?
- [ ] 데이터 없을 시 빈 상태 메시지가 표시되는가?

**데이터 있을 시 (Mock 또는 실제 API)**:
- [ ] React Flow 캔버스가 표시되는가?
- [ ] 노드(인물)가 원형으로 배치되는가?
- [ ] 엣지(관계)가 노드를 연결하는가?
- [ ] 범례 버튼 클릭 시 색상 정보가 표시되는가?
- [ ] 노드 드래그가 가능한가?
- [ ] 줌 인/아웃이 가능한가?
- [ ] 미니맵이 표시되는가?

---

### 2.4 재산분할 탭

**URL**: http://localhost:3000/cases/1 → **재산분할** 탭 클릭

**체크리스트**:
- [ ] 재산분할 탭 클릭 시 대시보드가 표시되는가?
- [ ] 로딩 스피너가 표시되는가?

**API 연동 시 (Backend 실행 필요)**:
- [ ] API 에러 시 에러 메시지와 "다시 시도" 버튼이 있는가?

**데이터 있을 시**:
- [ ] "재산분할 예측" 카드가 표시되는가?
- [ ] 분할 게이지가 표시되는가? (원고/피고 비율)
- [ ] 게이지 애니메이션이 동작하는가?
- [ ] 신뢰도 뱃지가 표시되는가? (높음/보통/낮음)
- [ ] "증거별 영향도" 섹션이 접기/펼치기 되는가?
- [ ] 안내 문구가 하단에 표시되는가?

**예상 화면**:
```
┌─────────────────────────────────────────┐
│ ⚖️ 재산분할 예측          신뢰도: 높음  🔄 │
├─────────────────────────────────────────┤
│ 원고 60.5%                    피고 39.5% │
│ ●━━━━━━━━━━━━━━━━━│━━━━━━━━━━━━━━━━━━● │
│ 6억원               ↑              4억원 │
│                   50%                   │
├─────────────────────────────────────────┤
│ ▼ 증거별 영향도 (3개)                     │
│   📄 카카오톡 대화    +8.5% 원고 유리     │
│   📄 금융거래내역    -5.0% 피고 유리      │
│   📄 녹음파일        +3.2% 원고 유리     │
├─────────────────────────────────────────┤
│ ℹ️ 이 예측은 AI 분석을 기반으로 한 참고 자료입니다. │
└─────────────────────────────────────────┘
```

---

## 3. API 엔드포인트 테스트

### 3.1 관계 분석 API

**Endpoint**: `POST /l-demo/analyze/relationships`

**Request**:
```json
{
  "text": "김철수와 이영희는 2015년에 결혼했습니다. 두 사람 사이에는 김민수가 있습니다."
}
```

**Expected Response**:
```json
{
  "status": "success",
  "result": {
    "nodes": [
      { "id": "person-0", "name": "김철수", "role": "plaintiff", "side": "plaintiff", "color": "#4CAF50" },
      { "id": "person-1", "name": "이영희", "role": "defendant", "side": "defendant", "color": "#F44336" },
      { "id": "person-2", "name": "김민수", "role": "child", "side": "plaintiff", "color": "#2196F3" }
    ],
    "edges": [
      { "source": "person-0", "target": "person-1", "relationship": "spouse", "label": "배우자", "confidence": 0.95 }
    ]
  }
}
```

### 3.2 영향도 분석 API

**Endpoint**: `POST /l-demo/analyze/impact`

**Request**:
```json
{
  "case_id": "case-001",
  "evidences": [
    { "id": "ev-001", "type": "카카오톡", "content": "대화 내용..." }
  ]
}
```

**Expected Response**:
```json
{
  "status": "success",
  "result": {
    "plaintiff_ratio": 60.5,
    "defendant_ratio": 39.5,
    "evidence_impacts": [
      {
        "evidence_id": "ev-001",
        "evidence_type": "카카오톡",
        "impact_percent": 8.5,
        "direction": "plaintiff_favor",
        "reason": "외도 증거로 인한 유책사유 인정"
      }
    ],
    "confidence_level": "high"
  }
}
```

---

## 4. 색상 참조

### 노드 (역할별)
| 역할 | 한글 | 색상 | HEX |
|------|------|------|-----|
| plaintiff | 원고 | 🟢 | #4CAF50 |
| defendant | 피고 | 🔴 | #F44336 |
| child | 자녀 | 🔵 | #2196F3 |
| third_party | 제3자 | 🩷 | #E91E63 |
| unknown | 미상 | ⚪ | #9E9E9E |

### 엣지 (관계별)
| 관계 | 한글 | 색상 | HEX |
|------|------|------|-----|
| spouse | 배우자 | 🔵 | #2196F3 |
| affair | 외도 | 🩷 | #E91E63 |
| parent/child | 부모/자녀 | 🟢 | #4CAF50 |
| sibling | 형제 | 🟠 | #FF9800 |

---

## 5. 알려진 이슈

1. **Backend 미실행 시**: API 호출 실패로 에러 메시지 표시 (정상 동작)
2. **데이터 없을 시**: 빈 상태 메시지 표시 (정상 동작)
3. **React Flow 초기 로드**: 첫 로드 시 약간의 지연 있을 수 있음

---

## 6. 피드백 제출

테스트 중 발견된 이슈나 개선 사항은 아래 형식으로 기록해주세요:

```
[페이지]: /cases/1/relationship
[증상]: 노드 클릭 시 모달이 열리지 않음
[기대 동작]: 노드 클릭 시 인물 상세 정보 모달 표시
[심각도]: 낮음/중간/높음
[스크린샷]: (있다면 첨부)
```

---

**테스트 완료 후**: report.md에 테스트 결과 기록 부탁드립니다.
